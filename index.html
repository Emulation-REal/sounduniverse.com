<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fart Soundboard Extravaganza</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #111; color: #fff; text-align: center; }
    body.dark { background: linear-gradient(to bottom, #333, #111); color: #fff; }
    h1 { padding: 1rem; color: #ff4500; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
    nav { margin: 1rem 0; }
    .tab-btn { background-color: #333; color: #fff; border: none; padding: 0.5rem 1rem; cursor: pointer; border-radius: 5px; margin: 0 0.25rem; }
    .tab-btn.active { background-color: #555; }
    .sound-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem; padding: 1rem; }
    .sound-card { background: #272727; border-radius: 10px; width: 150px; height: 120px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; padding: 10px; }
    .sound-title { font-size: 14px; margin-bottom: 8px; }
    .sound-play { background: #ffb400; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; }
    .fav-toggle { position: absolute; top: 6px; right: 8px; background: transparent; border: none; color: #ff6b6b; font-size: 16px; cursor: pointer; }
    #search { margin: 0.5rem 0; padding: 0.5rem; width: 80%; max-width: 400px; border-radius: 5px; border: none; }
    #settings label { display: block; margin: 0.5rem 0; }
    canvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 9999; }
    footer { padding: 12px; color: #999; font-size: 13px; }
    @media (max-width: 480px) { .sound-card { width: 120px; height: 110px; } }
  </style>
</head>
<body>
  <h1>💨 Fart Soundboard Extravaganza 💨</h1>
  <input type="text" id="search" placeholder="Search sounds...">
  <nav>
    <button class="tab-btn active" data-tab="all">All</button>
    <button class="tab-btn" data-tab="reverb">Reverb</button>
    <button class="tab-btn" data-tab="meme">Meme</button>
    <button class="tab-btn" data-tab="favorites">Favorites</button>
    <button class="tab-btn" data-tab="settings">Settings</button>
  </nav>

  <div id="all" class="tab-content sound-grid" aria-live="polite"></div>
  <div id="reverb" class="tab-content sound-grid" style="display:none"></div>
  <div id="meme" class="tab-content sound-grid" style="display:none"></div>
  <div id="favorites" class="tab-content" style="display:none">
    <div id="favorites-list" class="sound-grid"></div>
  </div>
  <div id="settings" class="tab-content" style="display:none; padding: 1rem;">
    <label>Volume: <input type="range" id="volume" min="0" max="1" step="0.01" value="1"></label>
    <label>Speed: <input type="range" id="speed" min="0.5" max="2" step="0.01" value="1"></label>
    <label>Loop: <input type="checkbox" id="loop"></label>
    <label>Auto-play interval (sec, 0 to disable): <input type="number" id="auto-interval" min="0" value="0"></label>
    <label>Allow multi-play: <input type="checkbox" id="multi-play" checked></label>
    <label>Dark mode: <input type="checkbox" id="dark-mode"></label>
  </div>

  <canvas id="confetti-canvas"></canvas>
  <footer>Put your .mp3 files in a <code>/sounds/</code> folder and name them exactly as listed.</footer>

  <script>
    const sounds = [
      { name: 'Dry Fart', url: 'sounds/dry-fart.mp3', category: 'all' },
      { name: 'Fart with Reverb', url: 'sounds/fart-with-reverb.mp3', category: 'reverb' },
      { name: 'Fart Echo', url: 'sounds/fart-echo.mp3', category: 'reverb' },
      { name: 'Wet Fart Meme', url: 'sounds/wet-fart-meme.mp3', category: 'meme' },
      { name: 'Tiktok Fart Sound', url: 'sounds/tiktok-fart-sound.mp3', category: 'meme' },
      { name: 'Movie Fart', url: 'sounds/movie-fart.mp3', category: 'meme' },
      { name: 'Fart Bass Boosted', url: 'sounds/fart-bass-boosted.mp3', category: 'reverb' },
      { name: 'Brain Fart Slowed', url: 'sounds/brain-fart-slowed.mp3', category: 'meme' },
      { name: 'Goofy Ahh Fart', url: 'sounds/goofy-ahh-fart.mp3', category: 'meme' },
      { name: 'Mega Fart', url: 'sounds/mega-fart.mp3', category: 'all' },
      { name: 'Fart with Extra Reverb', url: 'sounds/fart-with-extra-reverb.mp3', category: 'reverb' },
      { name: 'Quick Fart with Reverb', url: 'sounds/quick-fart-with-reverb.mp3', category: 'reverb' },
      { name: 'Perfect Fart', url: 'sounds/perfect-fart.mp3', category: 'all' },
      { name: 'Long Brain Fart', url: 'sounds/long-brain-fart.mp3', category: 'meme' },
      { name: 'Bowser Fart', url: 'sounds/bowser-fart.mp3', category: 'meme' },
      { name: 'Squeak Fart with Reverb', url: 'sounds/squeak-fart-with-reverb.mp3', category: 'reverb' },
      { name: 'Fart Sound Effect 3', url: 'sounds/fart-sound-effect-3.mp3', category: 'all' },
      { name: 'Fart Reverb Without Reverb', url: 'sounds/fart-reverb-without-reverb.mp3', category: 'reverb' },
      { name: 'Nicki Minaj Fart Remix', url: 'sounds/nicki-minaj-fart-remix.mp3', category: 'meme' },
      { name: 'Fart Meme Sound', url: 'sounds/fart-meme-sound.mp3', category: 'meme' }
    ];

    const tabs = document.querySelectorAll('.tab-btn');
    const contents = document.querySelectorAll('.tab-content');
    const searchInput = document.getElementById('search');
    const volumeInput = document.getElementById('volume');
    const speedInput = document.getElementById('speed');
    const loopInput = document.getElementById('loop');
    const multiPlayInput = document.getElementById('multi-play');
    const autoIntervalInput = document.getElementById('auto-interval');
    const darkModeInput = document.getElementById('dark-mode');
    const favoritesKey = 'fart_favorites_v1';
    let favorites = JSON.parse(localStorage.getItem(favoritesKey) || '[]');
    let currentAudios = [];
    let autoIntervalId = null;

    function ensureCanvasSize() {
      const canvas = document.getElementById('confetti-canvas');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    window.addEventListener('resize', ensureCanvasSize);
    ensureCanvasSize();

    function confetti() {
      const canvas = document.getElementById('confetti-canvas');
      const ctx = canvas.getContext('2d');
      const particles = [];
      for (let i = 0; i < 40; i++) {
        particles.push({ x: Math.random() * canvas.width, y: Math.random() * canvas.height * 0.5, r: Math.random() * 8 + 4, vx: Math.random() * 6 - 3, vy: Math.random() * 6 - 3, color: `hsl(${Math.random()*360},80%,60%)` });
      }
      function draw() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        let alive = false;
        for (const p of particles) {
          if (p.r > 0.5) alive = true;
          ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fillStyle = p.color; ctx.fill();
          p.x += p.vx; p.y += p.vy; p.r *= 0.96;
        }
        if (alive) requestAnimationFrame(draw); else ctx.clearRect(0,0,canvas.width,canvas.height);
      }
      draw();
    }

    function playSound(sound) {
      if (!multiPlayInput.checked) {
        currentAudios.forEach(a => { try { a.pause(); a.currentTime = 0; } catch(e) {} });
        currentAudios = [];
      }
      const audio = new Audio(sound.url);
      audio.crossOrigin = 'anonymous';
      audio.volume = Number(volumeInput.value);
      audio.playbackRate = Number(speedInput.value);
      audio.loop = loopInput.checked;
      audio.addEventListener('error', () => { alert('Failed to load audio: ' + sound.url); });
      audio.play().catch(() => {});
      currentAudios.push(audio);
      confetti();
    }

    function toggleFavorite(name) {
      if (favorites.includes(name)) favorites = favorites.filter(x => x !== name); else favorites.push(name);
      localStorage.setItem(favoritesKey, JSON.stringify(favorites));
      renderFavorites();
      renderSounds(searchInput.value);
    }

    function createCard(sound) {
      const card = document.createElement('div'); card.className = 'sound-card';
      const favBtn = document.createElement('button'); favBtn.className = 'fav-toggle'; favBtn.innerText = favorites.includes(sound.name) ? '❤' : '♡';
      favBtn.addEventListener('click', (e) => { e.stopPropagation(); toggleFavorite(sound.name); });
      const title = document.createElement('div'); title.className = 'sound-title'; title.innerText = sound.name;
      const play = document.createElement('button'); play.className = 'sound-play'; play.innerText = 'Play';
      play.addEventListener('click', () => playSound(sound));
      card.appendChild(favBtn); card.appendChild(title); card.appendChild(play);
      return card;
    }

    function renderSounds(filter = '') {
      ['all','reverb','meme'].forEach(cat => {
        const container = document.getElementById(cat);
        container.innerHTML = '';
        sounds.filter(s => (cat === 'all' || s.category === cat) && s.name.toLowerCase().includes(filter.toLowerCase()))
          .forEach(sound => container.appendChild(createCard(sound)));
      });
    }

    function renderFavorites() {
      const container = document.getElementById('favorites-list');
      container.innerHTML = '';
      favorites.forEach(name => {
        const sound = sounds.find(s => s.name === name);
        if (sound) container.appendChild(createCard(sound));
      });
    }

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        contents.forEach(c => c.style.display = 'none');
        document.getElementById(tab.dataset.tab).style.display = 'flex';
      });
    });

    searchInput.addEventListener('input', (e) => renderSounds(e.target.value));

    autoIntervalInput.addEventListener('input', () => {
      clearInterval(autoIntervalId);
      const sec = Number(autoIntervalInput.value);
      if (sec > 0) autoIntervalId = setInterval(() => { const s = sounds[Math.floor(Math.random()*sounds.length)]; playSound(s); }, sec * 1000);
    });

    darkModeInput.addEventListener('change', () => document.body.classList.toggle('dark', darkModeInput.checked));

    renderSounds(); renderFavorites();
  </script>
</body>
</html>
